{% extends 'admin/master.html' %}

{% block body %}
<div class="row">
    <br/>
    <br/>
    {% if admin_permission.can() %}
    <div class="col-sm-10 col-sm-offset-1">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="panel-title">用户管理</div>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <a href="/admin/user/">用户数量</a>
                        <span class="badge">{{ User.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/role/">身份数量</a>
                        <span class="badge">{{ Role.query.count() }}</span></li>
                </ul>
            </div>
        </div>
        <br/>
    </div>
    {% endif %}
    <div class="col-sm-5 col-sm-offset-1">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="panel-title">幼教内容</div>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <a href="/admin/book/">教材数量</a>
                        <span class="badge text-right">{{ Book.query.count() }}</span>
                    </li>
                    <li class="list-group-item">
                        <a href="/admin/activity/">幼教动态数量</a>
                        <span class="badge text-right">{{ Activity.query.count() }}</span>
                    </li>
                    <li class="list-group-item">
                        <a href="/admin/courseware/">课件数量</a>
                        <span class="badge text-right">{{ Courseware.query.count() }}</span>
                    </li>
                    <li class="list-group-item">
                        <a href="/admin/page/">静态页面数量</a>
                        <span class="badge text-right">{{ Page.query.count() }}</span>
                    </li>
                    <li class="list-group-item">
                        <a href="/admin/onlinecourse/">幼教网课数量</a>
                        <span class="badge text-right">{{ OnlineCourse.query.count() }}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-5">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="panel-title">资源管理</div>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <a href="/admin/photo/">图片数量</a>
                        <span class="badge">{{ Photo.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/album/">相册数量</a>
                        <span class="badge">{{ Album.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/video/">视频数量</a>
                        <span class="badge">{{ Video.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/audio/">音频数量</a>
                        <span class="badge">{{ Audio.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/document/">文档数量</a>
                        <span class="badge">{{ Document.query.count() }}</span></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-10 col-sm-offset-1">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="panel-title">页面展示</div>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <a href="/admin/contentlist/">首页推荐</a>
                        <span class="badge">{{ ContentList.query.count() }}</span></li>
                    <li class="list-group-item">
                        <a href="/admin/slider/">轮播图</a>
                        <span class="badge">{{ Slider.query.count() }}</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block tail %}
    <style>
    #not-support-browser{
        width: 100%;
        height: 80px;
        position: fixed;
        top: 0;
        left: 0;
        border: 1px solid #ccc;
        line-height: 80px;
        font-size: 24px;
        color: white;
        text-align: center;
        display: none;
        z-index: 10;
        background: black;
        opacity: 0.8;
        filter: alpha(opacity=80);
    }
    #not-support-browser a {
        color: #23527c;
    }
    </style>
    <div id="not-support-browser">
        您的浏览器版本过低，请使用
        <a href="http://jingyan.baidu.com/article/d169e186a3dd27436611d829.html" target="_blank">360浏览器急速模式</a>，
        或<a href="http://7xkw9l.dl1.z0.glb.clouddn.com/ChromeStandalone_47.0.2526.106_Setup.1450323126.exe" download>下载使用Chrome</a>
    </div>
    <script>
    var supportBrowser = function(){
        var browser = (function(){
            var ua= navigator.userAgent, tem,
            M= ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
            if(/trident/i.test(M[1])){
                tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];
                return 'IE '+(tem[1] || '');
            }
            if(M[1]=== 'Chrome'){
                tem= ua.match(/\b(OPR|Edge)\/(\d+)/);
                if(tem!= null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
            }
            M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
            if((tem= ua.match(/version\/(\d+)/i))!= null) M.splice(1, 1, tem[1]);
            return M.join(' ');
        })();
        var re = /msie\s[6|7|8]/;
        return !re.test(browser.toLowerCase());
    };
    if (!supportBrowser()){
        var notSupportDiv = document.getElementById("not-support-browser");
        notSupportDiv.style.display = 'block';
    }
    </script>
{% endblock %} %}
